colourscheme='molokai'
vimversion='vim80'
bashrc=$(<~/.bashrc)
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

cd $DIR
{
    git pull
    git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
} &> /dev/null

echo Updating vim
echo ____________

rm -f ~/.vimrc
rm -f /usr/share/vim/$vimversion/colors/$colourscheme.vim
echo Deleted old files..

wget https://raw.githubusercontent.com/connermcd/gtd/master/gtd /usr/bin/
sudo mv gtd.1 /usr/bin/gtd
sudo chmod 777 /usr/bin/gtd
ln .vimrc ~/.vimrc
cp $colourscheme.vim /usr/share/vim/$vimversion/colors/$colourscheme.vim
echo Linked new files..

echo Installing plugins..
vim +PluginClean +qall
vim +PluginInstall +qall
vim +PluginUpdate +qall

if [[ ! $bashrc =~ vimupdate ]]
then
    echo alias vimupdate=\"bash $PWD/setup\" >> ~/.bashrc
fi

if [[ ! $bashrc =~ uploadvimrc ]]
then
    echo alias uploadvimrc=\"bash $PWD/editrc\" >> ~/.bashrc
fi
    
if [[ ! $bashrc =~ work-tmux ]]
then
    cat $DIR/work-tmux-func >> ~/.bashrc
fi
    
echo Done! You can now use Vim. use vimupdate to run this script again
